<div class="white-top">
	<div class="container full-height">
		<div class="table full-height">
			<div class="td vertical-align-middle">
				<h1 class="flush blue">Account Settings</h1>
			</div>
		</div>
	</div>
</div>
<div class="container soft-half--ends">
	<div class="line">
		<div class="unit three-fourths">
			<form name="settingsForm" data-ng-submit="saveChanges()" class="nudge-half--bottom">
				<div class="text-center nudge-half--bottom full-width">
					<div class="user-img-settings center-block" data-ng-show="newUserImage" data-ng-style="{'background-image': 'url(' + newUserImage.url + ')'}">
						<a data-ng-href="/profile/{{user.username}}"></a>
					</div>
					<div class="user-img-settings center-block" data-ng-hide="newUserImage" data-ng-style="{'background-image': 'url(' + user.pictureUrl + ')'}">
						<a data-ng-href="/profile/{{user.username}}"></a>
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="userImage" class="caps weight--bold">Picture</label>
					</div>
					<div class="unit seven-twelfths">
						<input class="full-width" id="newUserImage" name="newUserImage" type="file" accept="image/*" data-image="newUserImage" />
					</div>
					<div class="unit three-twelfths last-unit soft-half--left label-container">
						<a href data-ng-click="useFacebookImage()" data-ng-show="user.facebook.id && !usingFacebookImage() && user.type == 'student'" class="btn fb full-width"><i class="fa fa-facebook"></i> Use Facebook</a>
						<select class="full-width" data-ng-model="picturePage" data-ng-show="user.facebook.managedPages.length && user.type =='business'" data-ng-change="usePageForImage()">
						    <option value="">Use a Facebook page</option>
						    <option data-ng-repeat="page in user.facebook.managedPages" value="{{page.id}}">{{ page.name }}</option>
						</select>
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="school" class="caps weight--bold">School</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<select class="full-width" data-ui-select2="schoolSelectOptions" data-ng-model="userSchool" data-placeholder="Select your school">
						    <option value=""></option>
						    <option data-ng-repeat="school in schools" value="{{school._id}}">{{ school.name }}</option>
						</select>
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'student'">
					<div class="unit label-container two-twelfths">
						<label for="userFirstName" class="caps weight--bold">First</label>
					</div>
					<div class="unit four-twelfths">
						<input class="full-width" id="userFirstName" name="userFirstName" type="text" data-ng-model="userFirstName" placeholder="first name" />
					</div>
					<div class="unit label-container two-twelfths soft-half--right text-right">
						<label for="userLastName" class="caps weight--bold">Last</label>
					</div>
					<div class="unit four-twelfths last-unit">
						<input class="full-width" id="userLastName" name="userLastName" type="text" data-ng-model="userLastName" placeholder="last name" />
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'business'">
					<div class="unit label-container two-twelfths">
						<label for="userBusinessName" class="caps weight--bold">Name</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" id="userBusinessName" placeholder="Your club or group name" data-ng-model="userBusinessName" />
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'business'" >
					<div class="unit label-container two-twelfths">
						<label for="userBusinessDescription" class="caps weight--bold">Description</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<textarea id="userBusinessDescription" name="userBusinessDescription" data-ng-model="userBusinessDescription" class="full-width medium" placeholder="Description of your club or group"></textarea>
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'business'" >
					<div class="unit label-container two-twelfths">
						<label for="locationAddress" class="caps weight--bold">Address</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" id="locationAddress" name="locationAddress" data-ng-model="locationAddress" placeholder="Address of your location" data-ng-blur="checkAddress()" />
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'business'" >
					<div class="unit label-container two-twelfths">
						<label for="websiteAddress" class="caps weight--bold">Website</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" id="websiteAddress" name="websiteAddress" data-ng-model="websiteAddress" placeholder="Your website address" />
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.facebook.managedPages.length && user.type == 'business'" >
					<div class="unit label-container two-twelfths">
						<label for="userFacebookLink" class="caps weight--bold">Facebook</label>
					</div>
					<div class="unit ten-twelfths last-unit label-container">
						<select class="full-width" id="userFacebookLink" name="userFacebookLink" data-ng-model="userFacebookLink">
						    <option value="">Choose a Facebook page</option>
						    <option data-ng-repeat="page in user.facebook.managedPages" value="{{page.id}}" data-ng-selected="page.id == userFacebookLink">{{ page.name }}</option>
						</select>
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="userTwitterLink" class="caps weight--bold">Twitter</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" id="userTwitterLink" name="userTwitterLink" data-ng-model="userTwitterLink" placeholder="Your Twitter handle" />
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="userEmail" class="caps weight--bold">Email</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" name="emailBusiness" id="userEmail" placeholder="email address" data-ng-model="userEmailBusiness" data-ng-show="user.type == 'business'" data-ng-blur="checkEmail()" />
						<input type="text" class="full-width" name="emailStudent" id="userEmail" placeholder="email address" data-ng-model="userEmailStudent" data-ng-pattern="/([a-z0-9][-a-z0-9_\+\.]*[a-z0-9])@([a-z0-9][-a-z0-9\.]*[a-z0-9]\.(edu)|([0-9]{1,3}\.{3}[0-9]{1,3}))/" data-ng-show="user.type == 'student'" data-ng-blur="checkEmail()" />
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="userPassword" class="caps weight--bold">Password</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="password" class="full-width" id="userPassword" placeholder="New password" data-ng-model="userPassword" />
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit two-twelfths label-container">
						<label for="password" class="caps weight--bold">Confirm</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="password" id="confirmPassword" data-ng-model="confirmPassword" name="confirmPassword" data-password-verify="userPassword" class="full-width" placeholder="Confirm new password" />
					</div>
				</div>
				<div class="line">
					<div class="unit full-width last-unit text-right">
						<span class="red weight--bold nudge--right" data-ng-show="saveError" data-ng-bind="saveError"></span>
						<span class="red weight--bold nudge--right" data-ng-show="settingsForm.emailStudent.$error.pattern && settingsForm.emailStudent.length > 0">
							Email address must end in .edu.
						</span>
						<span class="red weight--bold nudge--right" data-ng-show="emailTaken">
							That email address is already in use.
						</span>
						<span class="blue weight--bold nudge--right" data-ng-show="changesSaved">Changes saved!</span>
						<span class="red weight--bold nudge--right" data-ng-show="settingsForm.confirmPassword.$error.passwordVerify">
							Passwords do not match.
						</span>
						<input type="submit" class="btn" value="Save Changes" data-ng-disabled="settingsForm.$invalid || emailTaken" />
					</div>
				</div>
			</form>
			<h2 class="flush soft-half--bottom" data-ng-show="user.subscriptions">Manage Subscriptions</h2>
			<div class="inline-block" data-ng-repeat="subscription in user.subscriptions">
				<div class="user-img-subscriptions" data-ng-style="{'background-image': 'url(' + subscription.pictureUrl + ')'}">
					<a data-ng-href="/profile/{{subscription.username}}" data-tooltip="{{subscription.displayName}}" data-tooltip-placement="bottom"></a>
					<a href class="remove" data-tooltip="Unsubscribe" data-tooltip-placement="top" data-ng-click="removeSubscription(subscription._id)"><i class="fa fa-times"></i></a>
				</div>
			</div>
		</div>
		<div class="unit one-fourth soft--left last-unit">
			<a href data-ng-click="fbLogin()" data-ng-hide="user.facebook.id" class="btn fb full-width nudge-half--bottom"><i class="fa fa-facebook"></i> Add Facebook</a>
			<a href data-ng-click="fbLogout()" data-ng-show="user.facebook.id" class="btn fb full-width nudge-half--bottom"><i class="fa fa-facebook"></i> Remove Facebook</a>
			<div class="line nudge-half--bottom" data-ng-show="user.facebook.id">
				<div class="one-twelfth unit">
					<input type="checkbox" data-ng-model="user.facebook.autoPost" data-ng-change="changeFbAutoPost()" id="autoPost" name="autoPost" />
				</div>
				<div class="eleven-twelfths last-unit label-container soft-half--left">
					<label for="autoPost">Autopost Activity</label> 
					<i class="fa fa-question-circle nudge-half--left pointer" data-ng-click="openExplanation()"></i>
				</div>
			</div>
			<a href data-ng-click="googleLogin()" data-ng-hide="user.google.id" class="btn google full-width"><i class="fa fa-google-plus"></i> Add Google</a>
			<a href data-ng-click="googleLogout()" data-ng-show="user.google.id" class="btn google full-width"><i class="fa fa-google-plus"></i> Remove Google</a>
		</div>
	</div>
</div>

<script type="text/ng-template" id="explanationModal.html">
    <div class="modal-header">
        <h2 class="flush">Autopost Activity</h2>
    </div>
    <div class="modal-body">
    	<h3 class="caps flush--top nudge-half--bottom">What does this do?</h3>
    	<p>Enabling this option will automatically post items to Facebook when you:</p>
    	<ol>
    		<li class="nudge-half--bottom">Create a new public event</li>
    		<li>RSVP to an existing public event</li>
    	</ol>
    	<p>Disabling this option means nothing will be posted to Facebook without you explicitly doing so.</p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-ng-click="ok()">Ok</button>
    </div>
</script>