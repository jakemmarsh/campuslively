<div class="white-top">
	<div class="container full-height">
		<div class="table full-height">
			<div class="td vertical-align-middle">
				<h1 class="flush blue">Account Settings</h1>
			</div>
		</div>
	</div>
</div>
<div class="container soft-half--ends">
	<div class="line">
		<div class="unit three-fourths">
			<form name="settingsForm" data-ng-submit="saveChanges()" class="nudge-half--bottom">
				<div class="text-center nudge-half--bottom full-width">
					<div class="user-img-settings center-block" data-ng-show="newUserImage" data-ng-style="{'background-image': 'url(' + newUserImage.url + ')'}"></div>
					<div class="user-img-settings center-block" data-ng-hide="newUserImage" data-ng-style="{'background-image': 'url(' + user.pictureUrl + ')'}"></div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="userImage" class="caps weight--bold">Picture</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input class="full-width" id="newUserImage" name="newUserImage" type="file" accept="image/*" data-image="newUserImage" />
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'student'">
					<div class="unit label-container two-twelfths">
						<label for="school" class="caps weight--bold">School</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<select class="full-width" data-ui-select2="schoolSelectOptions" ng-model="userSchool" data-placeholder="Select your school">
						    <option value=""></option>
						    <option data-ng-repeat="school in schools" value="{{school._id}}">{{ school.name }}</option>
						</select>
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'student'">
					<div class="unit label-container two-twelfths">
						<label for="userFirstName" class="caps weight--bold">First</label>
					</div>
					<div class="unit four-twelfths">
						<input class="full-width" id="userFirstName" name="userFirstName" type="text" data-ng-model="userFirstName" placeholder="first name" />
					</div>
					<div class="unit label-container two-twelfths soft-half--right text-right">
						<label for="userLastName" class="caps weight--bold">Last</label>
					</div>
					<div class="unit four-twelfths last-unit">
						<input class="full-width" id="userLastName" name="userLastName" type="text" data-ng-model="userLastName" placeholder="last name" />
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'business'">
					<div class="unit label-container two-twelfths">
						<label for="userBusinessName" class="caps weight--bold">Name</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" id="userBusinessName" placeholder="Your club or group name" data-ng-model="userBusinessName" />
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'business'" >
					<div class="unit label-container two-twelfths">
						<label for="userBusinessDescription" class="caps weight--bold">Description</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<textarea id="userBusinessDescription" name="userBusinessDescription" data-ng-model="userBusinessDescription" class="full-width medium" placeholder="Description of your club or group"></textarea>
					</div>
				</div>
				<div class="line nudge-half--bottom" data-ng-show="user.type == 'business'" >
					<div class="unit label-container two-twelfths">
						<label for="userBusinessDescription" class="caps weight--bold">Address</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" id="locationAddress" data-ng-model="locationAddress" placeholder="Address of location" data-ng-blur="checkAddress()" data-ng-required="!eventLocation" />
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="userEmail" class="caps weight--bold">Email</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="text" class="full-width" name="emailBusiness" id="userEmail" placeholder="email address" data-ng-model="userEmailBusiness" data-ng-show="user.type == 'business'" data-ng-blur="checkEmail()" />
						<input type="text" class="full-width" name="emailStudent" id="userEmail" placeholder="email address" data-ng-model="userEmailStudent" data-ng-pattern="/([a-z0-9][-a-z0-9_\+\.]*[a-z0-9])@([a-z0-9][-a-z0-9\.]*[a-z0-9]\.(edu)|([0-9]{1,3}\.{3}[0-9]{1,3}))/" data-ng-show="user.type == 'student'" data-ng-blur="checkEmail()" />
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit label-container two-twelfths">
						<label for="userPassword" class="caps weight--bold">Password</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="password" class="full-width" id="userPassword" placeholder="New password" data-ng-model="userPassword" />
					</div>
				</div>
				<div class="line nudge-half--bottom">
					<div class="unit two-twelfths label-container">
						<label for="password" class="caps weight--bold">Confirm</label>
					</div>
					<div class="unit ten-twelfths last-unit">
						<input type="password" id="confirmPassword" data-ng-model="confirmPassword" name="confirmPassword" data-password-verify="userPassword" class="full-width" placeholder="Confirm new password" />
					</div>
				</div>
				<div class="line">
					<div class="unit full-width last-unit text-right">
						<span class="red weight--bold nudge--right" data-ng-show="saveError" data-ng-bind="saveError"></span>
						<span class="red weight--bold nudge--right" data-ng-show="settingsForm.emailStudent.$error.pattern && settingsForm.emailStudent.length > 0">
							Email address must end in .edu.
						</span>
						<span class="red weight--bold nudge--right" data-ng-show="emailTaken">
							That email address is already in use.
						</span>
						<span class="blue weight--bold nudge--right" data-ng-show="changesSaved">Changes saved!</span>
						<span class="red weight--bold nudge--right" data-ng-show="settingsForm.confirmPassword.$error.passwordVerify">
							Passwords do not match.
						</span>
						<input type="submit" class="btn" value="Save Changes" data-ng-disabled="settingsForm.$invalid || emailTaken" />
					</div>
				</div>
			</form>
			<h2 class="flush soft-half--bottom" data-ng-show="user.subscriptions">Manage Subscriptions</h2>
			<div class="inline-block" data-ng-repeat="subscription in user.subscriptions">
				<div class="user-img-subscriptions" data-ng-style="{'background-image': 'url(' + subscription.pictureUrl + ')'}">
					<a data-ng-show="subscription.type == 'business'" data-ng-href="/profile/{{subscription.username}}" data-tooltip="{{subscription.businessName}}" data-tooltip-placement="bottom"></a>
					<a data-ng-show="subscription.type == 'student'" data-ng-href="/profile/{{subscription.username}}" data-tooltip="{{subscription.firstName}} {{subscription.lastName}}" data-tooltip-placement="bottom"></a>
					<a href class="remove" data-tooltip="Unsubscribe" data-tooltip-placement="top" data-ng-click="removeSubscription(subscription._id)"><i class="icon-remove"></i></a>
				</div>
			</div>
		</div>
		<div class="unit one-fourth soft--left last-unit">
			<a href data-ng-click="open('twitter')" class="btn twitter nudge--bottom full-width"><i class="icon-twitter"></i> Add Twitter</a>
			<a href data-ng-click="open('facebook')" class="btn fb full-width"><i class="icon-facebook"></i> Add Facebook</a>
		</div>
	</div>
</div>

<script type="text/ng-template" id="twitterModal.html">
    <div class="modal-header">
        <h3>Add Twitter Account</h3>
    </div>
    <div class="modal-body">
        <ul>
            <li ng-repeat="item in items">
                <a ng-click="selected.item = item">{{ item }}</a>
            </li>
        </ul>
        Selected: <b>{{ selected.item }}</b>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-ng-click="ok()">OK</button>
        <button class="btn btn-warning" data-ng-click="cancel()">Cancel</button>
    </div>
</script>

<script type="text/ng-template" id="facebookModal.html">
    <div class="modal-header">
        <h3>Add Facebook Account</h3>
    </div>
    <div class="modal-body">
        <ul>
            <li ng-repeat="item in items">
                <a ng-click="selected.item = item">{{ item }}</a>
            </li>
        </ul>
        Selected: <b>{{ selected.item }}</b>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-ng-click="ok()">OK</button>
        <button class="btn btn-warning" data-ng-click="cancel()">Cancel</button>
    </div>
</script>